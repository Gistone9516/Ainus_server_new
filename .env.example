# ============================================================
# Ainus Server - 환경 변수 설정
# ============================================================
#
# 사용법:
# 1. 이 파일을 .env로 복사하세요: cp .env.example .env
# 2. 아래 값들을 실제 값으로 수정하세요
# 3. 민감한 정보는 절대 Git에 커밋하지 마세요
#
# ============================================================

# ===========================================
# 필수 설정 (REQUIRED)
# ===========================================

# -------------------------------------------
# MySQL 데이터베이스 설정
# -------------------------------------------
# Docker 사용 시: 포트 3307
# 일반 MySQL 사용 시: 포트 3306
DB_HOST=127.0.0.1
DB_PORT=3307
DB_NAME=ai_model_app
DB_USER=ainus_user
DB_PASSWORD=qwer1234

# Docker Compose용 MySQL 루트 비밀번호 (선택사항)
MYSQL_ROOT_PASSWORD=root_password_change_me

# -------------------------------------------
# Redis 설정
# -------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
# REDIS_PASSWORD=                          # Redis 비밀번호 (없으면 비워두기)
REDIS_DB=0

# -------------------------------------------
# JWT 토큰 설정
# -------------------------------------------
# ⚠️ 프로덕션에서는 반드시 강력한 랜덤 문자열로 변경하세요!
JWT_SECRET=your_jwt_secret_change_me_to_random_string_min_32_chars
JWT_EXPIRES_IN=15m                        # Access Token 만료 시간 (예: 15m, 1h)
JWT_REFRESH_SECRET=your_refresh_secret_change_me_to_random_string_min_32_chars
JWT_REFRESH_EXPIRES_IN=7d                 # Refresh Token 만료 시간 (예: 7d, 30d)

# -------------------------------------------
# 서버 설정
# -------------------------------------------
NODE_ENV=development                      # development | production | test
PORT=3000                                 # 서버 포트
LOG_LEVEL=info                            # debug | info | warn | error
LOG_FILE_PATH=./logs/app.log             # 로그 파일 경로

# ===========================================
# OAuth 2.0 소셜 로그인 설정 (선택사항)
# ===========================================

# -------------------------------------------
# Google OAuth 2.0
# -------------------------------------------
# 발급 방법: https://console.cloud.google.com/
# 1. 프로젝트 생성
# 2. OAuth 2.0 클라이언트 ID 생성
# 3. 승인된 리디렉션 URI 추가
GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_CALLBACK_URL=http://localhost:3000/api/v1/auth/google/callback

# -------------------------------------------
# Kakao OAuth 2.0
# -------------------------------------------
# 발급 방법: https://developers.kakao.com/
# 1. 애플리케이션 추가
# 2. REST API 키 발급
# 3. Redirect URI 등록
KAKAO_CLIENT_ID=your_kakao_rest_api_key
KAKAO_CLIENT_SECRET=your_kakao_client_secret
KAKAO_CALLBACK_URL=http://localhost:3000/api/v1/auth/kakao/callback

# -------------------------------------------
# Naver OAuth 2.0
# -------------------------------------------
# 발급 방법: https://developers.naver.com/
# 1. 애플리케이션 등록
# 2. Client ID와 Client Secret 발급
# 3. Callback URL 등록
NAVER_CLIENT_ID=your_naver_client_id
NAVER_CLIENT_SECRET=your_naver_client_secret
NAVER_CALLBACK_URL=http://localhost:3000/api/v1/auth/naver/callback

# ===========================================
# External API 설정 (선택사항)
# ===========================================

# -------------------------------------------
# Artificial Analysis API (AI 모델 데이터)
# -------------------------------------------
# 발급 방법: https://artificialanalysis.ai/
ARTIFICIAL_ANALYSIS_API_KEY=your_api_key_here

# -------------------------------------------
# Naver News API (뉴스 수집)
# -------------------------------------------
# 발급 방법: https://developers.naver.com/products/service-api/search/search.md
# ⚠️ OAuth와 별도로 검색 API용 Client ID/Secret 필요
NAVER_NEWS_API_KEY=your_naver_news_api_key
# 또는 OAuth와 동일한 키 사용 가능
# NAVER_NEWS_CLIENT_ID=your_naver_client_id
# NAVER_NEWS_CLIENT_SECRET=your_naver_client_secret

# -------------------------------------------
# OpenAI API (GPT 뉴스 클러스터링)
# -------------------------------------------
# 발급 방법: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your_openai_api_key_here
OPENAI_ASSISTANT_ID=asst_your_assistant_id_here

# ===========================================
# 이메일 설정 (비밀번호 재설정, 이메일 인증)
# ===========================================

# -------------------------------------------
# SMTP 설정 (Gmail 예시)
# -------------------------------------------
# Gmail 앱 비밀번호 생성 방법:
# 1. Google 계정 설정 → 보안
# 2. 2단계 인증 활성화
# 3. 앱 비밀번호 생성
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587                            # 587 (TLS) 또는 465 (SSL)
EMAIL_SECURE=false                        # true for 465, false for 587
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your_gmail_app_password
EMAIL_FROM=noreply@ainus.example.com
EMAIL_FROM_NAME=Ainus

# ===========================================
# 선택적 설정 (OPTIONAL)
# ===========================================

# -------------------------------------------
# 캐싱 설정
# -------------------------------------------
CACHE_TTL_DEFAULT=300                     # 기본 캐시 TTL (초) - 5분
CACHE_TTL_MODELS=600                      # 모델 데이터 캐시 TTL (초) - 10분
CACHE_TTL_TIMELINE=300                    # 타임라인 캐시 TTL (초) - 5분

# -------------------------------------------
# 보안 설정
# -------------------------------------------
BCRYPT_ROUNDS=10                          # Bcrypt 해싱 라운드 (10-12 권장)
RATE_LIMIT_WINDOW_MS=900000               # Rate Limit 시간 창 (밀리초) - 15분
RATE_LIMIT_MAX_REQUESTS=100               # 시간 창 내 최대 요청 수

# 암호화 키 (OAuth 토큰 암호화용)
ENCRYPTION_KEY=your-32-byte-encryption-key-here-change-me!

# -------------------------------------------
# 데이터 수집 설정
# -------------------------------------------
DATA_COLLECTION_ENABLED=true              # 뉴스 수집 활성화
DATA_COLLECTION_CRON=0 * * * *            # Cron 형식 (매 시간 정각)

# 파이프라인 설정
PIPELINE_ENABLE_SCHEDULE=true             # 자동 스케줄 활성화
PIPELINE_SCHEDULE_TIME=0 * * * *          # Cron 형식 (매 시간 정각)
PIPELINE_MAX_RETRIES=2                    # GPT API 재시도 횟수
PIPELINE_RETRY_DELAY_MS=5000              # 재시도 대기 시간 (밀리초)

# -------------------------------------------
# 기능 플래그
# -------------------------------------------
ENABLE_BATCH_JOBS=true                    # 배치 작업 활성화
ENABLE_NOTIFICATIONS=true                 # 알림 기능 활성화
GOOGLE_TRENDS_ENABLED=false               # Google Trends 통합 (미구현)

# -------------------------------------------
# 데이터베이스 풀 설정
# -------------------------------------------
DB_POOL_SIZE=10                           # 커넥션 풀 크기
DB_QUEUE_LIMIT=0                          # 큐 제한 (0 = 무제한)

# -------------------------------------------
# API 타임아웃 설정
# -------------------------------------------
API_TIMEOUT_MS=30000                      # API 요청 타임아웃 (밀리초) - 30초

# -------------------------------------------
# 디버그 설정
# -------------------------------------------
DEBUG=false                               # 디버그 모드 활성화

# ===========================================
# Docker Compose 전용 설정
# ===========================================

# MySQL 컨테이너 설정 (docker-compose.yml에서 사용)
MYSQL_HOST=localhost
MYSQL_PORT=3307
MYSQL_DATABASE=ai_model_app
MYSQL_USER=ainus_user
MYSQL_PASSWORD=ainus_password_change_me

# Elasticsearch 설정 (현재 미사용)
# ELASTICSEARCH_HOST=localhost
# ELASTICSEARCH_PORT=9200
# ELASTICSEARCH_NODE=http://localhost:9200

# ============================================================
# 환경 변수 검증
# ============================================================
#
# 서버 시작 시 다음 필수 환경 변수가 검증됩니다:
# - DB_HOST, DB_USER, DB_PASSWORD, DB_NAME
# - JWT_SECRET
#
# 누락된 환경 변수가 있으면 서버가 시작되지 않습니다.
#
# ============================================================